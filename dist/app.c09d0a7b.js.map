{"version":3,"sources":["scripts/calcui.js","../node_modules/expr-eval/dist/index.mjs","scripts/calculator.js","scripts/app.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["calcUI","entryScreen","document","querySelector","render","calcInput","textContent","INUMBER","IOP1","IOP2","IOP3","IVAR","IVARNAME","IFUNCALL","IFUNDEF","IEXPR","IEXPREVAL","IMEMBER","IENDSTATEMENT","IARRAY","Instruction","type","value","undefined","prototype","toString","unaryInstruction","binaryInstruction","ternaryInstruction","simplify","tokens","unaryOps","binaryOps","ternaryOps","values","nstack","newexpression","n1","n2","n3","f","i","length","item","Array","isArray","push","apply","map","x","concat","hasOwnProperty","pop","shift","substitute","variable","expr","j","expritem","replitem","evaluate","args","argCount","isExpressionEvaluator","resolveExpression","numTokens","functions","parser","isOperatorEnabled","v","Error","unshift","call","scope","Object","assign","len","arguments","defineProperty","writable","createExpressionEvaluator","token","n","expressionToString","toJS","escapeValue","join","String","JSON","stringify","replace","contains","array","obj","getSymbols","symbols","options","withMembers","prevVar","Expression","parse","vars","variables","filter","name","toJSFunction","param","Function","TEOF","TOP","TNUMBER","TSTRING","TPAREN","TBRACKET","TCOMMA","TNAME","TSEMICOLON","Token","index","TokenStream","expression","pos","current","consts","savedPosition","savedCurrent","newToken","save","restore","next","isWhitespace","isComment","isRadixInteger","isNumber","isOperator","isString","isParen","isBracket","isComma","isSemicolon","isNamedOp","isConst","isName","parseError","charAt","r","startPos","quote","indexOf","rawString","substring","unescape","c","toUpperCase","toLowerCase","str","hasLetter","codePointPattern","buffer","codePoint","test","fromCharCode","parseInt","backslash","radix","validDigit","valid","resetPos","foundDot","foundDigits","acceptSign","validExponent","parseFloat","op","getCoordinates","line","column","newline","msg","coords","ParserState","tokenStream","nextToken","savedNextToken","allowMemberAccess","tokenMatches","accept","expect","parseAtom","instr","isPrefixOperator","parseExpression","parseArrayList","exprInstr","parseUntilEndStatement","parseVariableAssignmentExpression","pushExpression","parseConditionalExpression","varName","varValue","lastInstrIndex","parseOrExpression","trueBranch","falseBranch","parseAndExpression","parseComparison","COMPARISON_OPERATORS","parseAddSub","ADD_SUB_OPERATORS","parseTerm","TERM_OPERATORS","parseFactor","parseExponential","parsePostfixExpression","parseFunctionCall","parseMemberExpression","parseArgumentList","add","a","b","Number","sub","mul","div","mod","equal","notEqual","greaterThan","lessThan","greaterThanEqual","lessThanEqual","andOperator","Boolean","orOperator","inOperator","sinh","Math","exp","cosh","tanh","Infinity","asinh","log","sqrt","acosh","atanh","log10","LOG10E","neg","not","trunc","ceil","floor","random","factorial","gamma","isInteger","isFinite","round","GAMMA_G","GAMMA_P","t","NaN","res","PI","sin","twoN","threeN","fourN","fiveN","pow","E","stringOrArrayLength","s","hypot","sum","larg","arg","abs","condition","cond","yep","nope","roundTo","isNaN","split","setVar","arrayIndex","max","min","arrayMap","arrayFold","init","reduce","acc","arrayFilter","stringOrArrayIndexOf","target","arrayJoin","sep","sign","ONE_THIRD","cbrt","expm1","log1p","log2","LN2","Parser","cos","tan","asin","acos","atan","ln","lg","and","or","fac","pyt","atan2","fold","parserState","sharedParser","optionNameMap","getOptionName","optionName","operators","require","Calc","controlCheck","operatorCheck","periodCheck","integerCheck","fixLength","input","ifControl","console","calculate","e","inputChange","slice","addInteger","ifOperation","includes","operatorChange","ifPeriod","registerInput","addEventListener","event","trigger","key","isOperation","isPeriod","isControl","id","posOrNeg","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","deps","cached","cache","some","cb"],"mappings":"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","file":"app.c09d0a7b.js","sourceRoot":"../src","sourcesContent":["/** @format */\n\nexport const calcUI = (() => {\n  const entryScreen = document.querySelector(\".entry\");\n\n  const render = (calcInput) => {\n    // console.log(calcInput);\n    entryScreen.textContent = calcInput;\n  };\n  return {\n    render,\n  };\n})();\n\nexport default calcUI;\n","var INUMBER = 'INUMBER';\nvar IOP1 = 'IOP1';\nvar IOP2 = 'IOP2';\nvar IOP3 = 'IOP3';\nvar IVAR = 'IVAR';\nvar IVARNAME = 'IVARNAME';\nvar IFUNCALL = 'IFUNCALL';\nvar IFUNDEF = 'IFUNDEF';\nvar IEXPR = 'IEXPR';\nvar IEXPREVAL = 'IEXPREVAL';\nvar IMEMBER = 'IMEMBER';\nvar IENDSTATEMENT = 'IENDSTATEMENT';\nvar IARRAY = 'IARRAY';\n\nfunction Instruction(type, value) {\n  this.type = type;\n  this.value = (value !== undefined && value !== null) ? value : 0;\n}\n\nInstruction.prototype.toString = function () {\n  switch (this.type) {\n    case INUMBER:\n    case IOP1:\n    case IOP2:\n    case IOP3:\n    case IVAR:\n    case IVARNAME:\n    case IENDSTATEMENT:\n      return this.value;\n    case IFUNCALL:\n      return 'CALL ' + this.value;\n    case IFUNDEF:\n      return 'DEF ' + this.value;\n    case IARRAY:\n      return 'ARRAY ' + this.value;\n    case IMEMBER:\n      return '.' + this.value;\n    default:\n      return 'Invalid Instruction';\n  }\n};\n\nfunction unaryInstruction(value) {\n  return new Instruction(IOP1, value);\n}\n\nfunction binaryInstruction(value) {\n  return new Instruction(IOP2, value);\n}\n\nfunction ternaryInstruction(value) {\n  return new Instruction(IOP3, value);\n}\n\nfunction simplify(tokens, unaryOps, binaryOps, ternaryOps, values) {\n  var nstack = [];\n  var newexpression = [];\n  var n1, n2, n3;\n  var f;\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER || type === IVARNAME) {\n      if (Array.isArray(item.value)) {\n        nstack.push.apply(nstack, simplify(item.value.map(function (x) {\n          return new Instruction(INUMBER, x);\n        }).concat(new Instruction(IARRAY, item.value.length)), unaryOps, binaryOps, ternaryOps, values));\n      } else {\n        nstack.push(item);\n      }\n    } else if (type === IVAR && values.hasOwnProperty(item.value)) {\n      item = new Instruction(INUMBER, values[item.value]);\n      nstack.push(item);\n    } else if (type === IOP2 && nstack.length > 1) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = binaryOps[item.value];\n      item = new Instruction(INUMBER, f(n1.value, n2.value));\n      nstack.push(item);\n    } else if (type === IOP3 && nstack.length > 2) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      if (item.value === '?') {\n        nstack.push(n1.value ? n2.value : n3.value);\n      } else {\n        f = ternaryOps[item.value];\n        item = new Instruction(INUMBER, f(n1.value, n2.value, n3.value));\n        nstack.push(item);\n      }\n    } else if (type === IOP1 && nstack.length > 0) {\n      n1 = nstack.pop();\n      f = unaryOps[item.value];\n      item = new Instruction(INUMBER, f(n1.value));\n      nstack.push(item);\n    } else if (type === IEXPR) {\n      while (nstack.length > 0) {\n        newexpression.push(nstack.shift());\n      }\n      newexpression.push(new Instruction(IEXPR, simplify(item.value, unaryOps, binaryOps, ternaryOps, values)));\n    } else if (type === IMEMBER && nstack.length > 0) {\n      n1 = nstack.pop();\n      nstack.push(new Instruction(INUMBER, n1.value[item.value]));\n    } /* else if (type === IARRAY && nstack.length >= item.value) {\n      var length = item.value;\n      while (length-- > 0) {\n        newexpression.push(nstack.pop());\n      }\n      newexpression.push(new Instruction(IARRAY, item.value));\n    } */ else {\n      while (nstack.length > 0) {\n        newexpression.push(nstack.shift());\n      }\n      newexpression.push(item);\n    }\n  }\n  while (nstack.length > 0) {\n    newexpression.push(nstack.shift());\n  }\n  return newexpression;\n}\n\nfunction substitute(tokens, variable, expr) {\n  var newexpression = [];\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === IVAR && item.value === variable) {\n      for (var j = 0; j < expr.tokens.length; j++) {\n        var expritem = expr.tokens[j];\n        var replitem;\n        if (expritem.type === IOP1) {\n          replitem = unaryInstruction(expritem.value);\n        } else if (expritem.type === IOP2) {\n          replitem = binaryInstruction(expritem.value);\n        } else if (expritem.type === IOP3) {\n          replitem = ternaryInstruction(expritem.value);\n        } else {\n          replitem = new Instruction(expritem.type, expritem.value);\n        }\n        newexpression.push(replitem);\n      }\n    } else if (type === IEXPR) {\n      newexpression.push(new Instruction(IEXPR, substitute(item.value, variable, expr)));\n    } else {\n      newexpression.push(item);\n    }\n  }\n  return newexpression;\n}\n\nfunction evaluate(tokens, expr, values) {\n  var nstack = [];\n  var n1, n2, n3;\n  var f, args, argCount;\n\n  if (isExpressionEvaluator(tokens)) {\n    return resolveExpression(tokens, values);\n  }\n\n  var numTokens = tokens.length;\n\n  for (var i = 0; i < numTokens; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER || type === IVARNAME) {\n      nstack.push(item.value);\n    } else if (type === IOP2) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      if (item.value === 'and') {\n        nstack.push(n1 ? !!evaluate(n2, expr, values) : false);\n      } else if (item.value === 'or') {\n        nstack.push(n1 ? true : !!evaluate(n2, expr, values));\n      } else if (item.value === '=') {\n        f = expr.binaryOps[item.value];\n        nstack.push(f(n1, evaluate(n2, expr, values), values));\n      } else {\n        f = expr.binaryOps[item.value];\n        nstack.push(f(resolveExpression(n1, values), resolveExpression(n2, values)));\n      }\n    } else if (type === IOP3) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      if (item.value === '?') {\n        nstack.push(evaluate(n1 ? n2 : n3, expr, values));\n      } else {\n        f = expr.ternaryOps[item.value];\n        nstack.push(f(resolveExpression(n1, values), resolveExpression(n2, values), resolveExpression(n3, values)));\n      }\n    } else if (type === IVAR) {\n      if (item.value in expr.functions) {\n        nstack.push(expr.functions[item.value]);\n      } else if (item.value in expr.unaryOps && expr.parser.isOperatorEnabled(item.value)) {\n        nstack.push(expr.unaryOps[item.value]);\n      } else {\n        var v = values[item.value];\n        if (v !== undefined) {\n          nstack.push(v);\n        } else {\n          throw new Error('undefined variable: ' + item.value);\n        }\n      }\n    } else if (type === IOP1) {\n      n1 = nstack.pop();\n      f = expr.unaryOps[item.value];\n      nstack.push(f(resolveExpression(n1, values)));\n    } else if (type === IFUNCALL) {\n      argCount = item.value;\n      args = [];\n      while (argCount-- > 0) {\n        args.unshift(resolveExpression(nstack.pop(), values));\n      }\n      f = nstack.pop();\n      if (f.apply && f.call) {\n        nstack.push(f.apply(undefined, args));\n      } else {\n        throw new Error(f + ' is not a function');\n      }\n    } else if (type === IFUNDEF) {\n      // Create closure to keep references to arguments and expression\n      nstack.push((function () {\n        var n2 = nstack.pop();\n        var args = [];\n        var argCount = item.value;\n        while (argCount-- > 0) {\n          args.unshift(nstack.pop());\n        }\n        var n1 = nstack.pop();\n        var f = function () {\n          var scope = Object.assign({}, values);\n          for (var i = 0, len = args.length; i < len; i++) {\n            scope[args[i]] = arguments[i];\n          }\n          return evaluate(n2, expr, scope);\n        };\n        // f.name = n1\n        Object.defineProperty(f, 'name', {\n          value: n1,\n          writable: false\n        });\n        values[n1] = f;\n        return f;\n      })());\n    } else if (type === IEXPR) {\n      nstack.push(createExpressionEvaluator(item, expr));\n    } else if (type === IEXPREVAL) {\n      nstack.push(item);\n    } else if (type === IMEMBER) {\n      n1 = nstack.pop();\n      nstack.push(n1[item.value]);\n    } else if (type === IENDSTATEMENT) {\n      nstack.pop();\n    } else if (type === IARRAY) {\n      argCount = item.value;\n      args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      nstack.push(args);\n    } else {\n      throw new Error('invalid Expression');\n    }\n  }\n  if (nstack.length > 1) {\n    throw new Error('invalid Expression (parity)');\n  }\n  // Explicitly return zero to avoid test issues caused by -0\n  return nstack[0] === 0 ? 0 : resolveExpression(nstack[0], values);\n}\n\nfunction createExpressionEvaluator(token, expr, values) {\n  if (isExpressionEvaluator(token)) return token;\n  return {\n    type: IEXPREVAL,\n    value: function (scope) {\n      return evaluate(token.value, expr, scope);\n    }\n  };\n}\n\nfunction isExpressionEvaluator(n) {\n  return n && n.type === IEXPREVAL;\n}\n\nfunction resolveExpression(n, values) {\n  return isExpressionEvaluator(n) ? n.value(values) : n;\n}\n\nfunction expressionToString(tokens, toJS) {\n  var nstack = [];\n  var n1, n2, n3;\n  var f, args, argCount;\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER) {\n      if (typeof item.value === 'number' && item.value < 0) {\n        nstack.push('(' + item.value + ')');\n      } else if (Array.isArray(item.value)) {\n        nstack.push('[' + item.value.map(escapeValue).join(', ') + ']');\n      } else {\n        nstack.push(escapeValue(item.value));\n      }\n    } else if (type === IOP2) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = item.value;\n      if (toJS) {\n        if (f === '^') {\n          nstack.push('Math.pow(' + n1 + ', ' + n2 + ')');\n        } else if (f === 'and') {\n          nstack.push('(!!' + n1 + ' && !!' + n2 + ')');\n        } else if (f === 'or') {\n          nstack.push('(!!' + n1 + ' || !!' + n2 + ')');\n        } else if (f === '||') {\n          nstack.push('(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }((' + n1 + '),(' + n2 + ')))');\n        } else if (f === '==') {\n          nstack.push('(' + n1 + ' === ' + n2 + ')');\n        } else if (f === '!=') {\n          nstack.push('(' + n1 + ' !== ' + n2 + ')');\n        } else if (f === '[') {\n          nstack.push(n1 + '[(' + n2 + ') | 0]');\n        } else {\n          nstack.push('(' + n1 + ' ' + f + ' ' + n2 + ')');\n        }\n      } else {\n        if (f === '[') {\n          nstack.push(n1 + '[' + n2 + ']');\n        } else {\n          nstack.push('(' + n1 + ' ' + f + ' ' + n2 + ')');\n        }\n      }\n    } else if (type === IOP3) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = item.value;\n      if (f === '?') {\n        nstack.push('(' + n1 + ' ? ' + n2 + ' : ' + n3 + ')');\n      } else {\n        throw new Error('invalid Expression');\n      }\n    } else if (type === IVAR || type === IVARNAME) {\n      nstack.push(item.value);\n    } else if (type === IOP1) {\n      n1 = nstack.pop();\n      f = item.value;\n      if (f === '-' || f === '+') {\n        nstack.push('(' + f + n1 + ')');\n      } else if (toJS) {\n        if (f === 'not') {\n          nstack.push('(' + '!' + n1 + ')');\n        } else if (f === '!') {\n          nstack.push('fac(' + n1 + ')');\n        } else {\n          nstack.push(f + '(' + n1 + ')');\n        }\n      } else if (f === '!') {\n        nstack.push('(' + n1 + '!)');\n      } else {\n        nstack.push('(' + f + ' ' + n1 + ')');\n      }\n    } else if (type === IFUNCALL) {\n      argCount = item.value;\n      args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      f = nstack.pop();\n      nstack.push(f + '(' + args.join(', ') + ')');\n    } else if (type === IFUNDEF) {\n      n2 = nstack.pop();\n      argCount = item.value;\n      args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      n1 = nstack.pop();\n      if (toJS) {\n        nstack.push('(' + n1 + ' = function(' + args.join(', ') + ') { return ' + n2 + ' })');\n      } else {\n        nstack.push('(' + n1 + '(' + args.join(', ') + ') = ' + n2 + ')');\n      }\n    } else if (type === IMEMBER) {\n      n1 = nstack.pop();\n      nstack.push(n1 + '.' + item.value);\n    } else if (type === IARRAY) {\n      argCount = item.value;\n      args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      nstack.push('[' + args.join(', ') + ']');\n    } else if (type === IEXPR) {\n      nstack.push('(' + expressionToString(item.value, toJS) + ')');\n    } else if (type === IENDSTATEMENT) ; else {\n      throw new Error('invalid Expression');\n    }\n  }\n  if (nstack.length > 1) {\n    if (toJS) {\n      nstack = [ nstack.join(',') ];\n    } else {\n      nstack = [ nstack.join(';') ];\n    }\n  }\n  return String(nstack[0]);\n}\n\nfunction escapeValue(v) {\n  if (typeof v === 'string') {\n    return JSON.stringify(v).replace(/\\u2028/g, '\\\\u2028').replace(/\\u2029/g, '\\\\u2029');\n  }\n  return v;\n}\n\nfunction contains(array, obj) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === obj) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getSymbols(tokens, symbols, options) {\n  options = options || {};\n  var withMembers = !!options.withMembers;\n  var prevVar = null;\n\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    if (item.type === IVAR || item.type === IVARNAME) {\n      if (!withMembers && !contains(symbols, item.value)) {\n        symbols.push(item.value);\n      } else if (prevVar !== null) {\n        if (!contains(symbols, prevVar)) {\n          symbols.push(prevVar);\n        }\n        prevVar = item.value;\n      } else {\n        prevVar = item.value;\n      }\n    } else if (item.type === IMEMBER && withMembers && prevVar !== null) {\n      prevVar += '.' + item.value;\n    } else if (item.type === IEXPR) {\n      getSymbols(item.value, symbols, options);\n    } else if (prevVar !== null) {\n      if (!contains(symbols, prevVar)) {\n        symbols.push(prevVar);\n      }\n      prevVar = null;\n    }\n  }\n\n  if (prevVar !== null && !contains(symbols, prevVar)) {\n    symbols.push(prevVar);\n  }\n}\n\nfunction Expression(tokens, parser) {\n  this.tokens = tokens;\n  this.parser = parser;\n  this.unaryOps = parser.unaryOps;\n  this.binaryOps = parser.binaryOps;\n  this.ternaryOps = parser.ternaryOps;\n  this.functions = parser.functions;\n}\n\nExpression.prototype.simplify = function (values) {\n  values = values || {};\n  return new Expression(simplify(this.tokens, this.unaryOps, this.binaryOps, this.ternaryOps, values), this.parser);\n};\n\nExpression.prototype.substitute = function (variable, expr) {\n  if (!(expr instanceof Expression)) {\n    expr = this.parser.parse(String(expr));\n  }\n\n  return new Expression(substitute(this.tokens, variable, expr), this.parser);\n};\n\nExpression.prototype.evaluate = function (values) {\n  values = values || {};\n  return evaluate(this.tokens, this, values);\n};\n\nExpression.prototype.toString = function () {\n  return expressionToString(this.tokens, false);\n};\n\nExpression.prototype.symbols = function (options) {\n  options = options || {};\n  var vars = [];\n  getSymbols(this.tokens, vars, options);\n  return vars;\n};\n\nExpression.prototype.variables = function (options) {\n  options = options || {};\n  var vars = [];\n  getSymbols(this.tokens, vars, options);\n  var functions = this.functions;\n  return vars.filter(function (name) {\n    return !(name in functions);\n  });\n};\n\nExpression.prototype.toJSFunction = function (param, variables) {\n  var expr = this;\n  var f = new Function(param, 'with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return ' + expressionToString(this.simplify(variables).tokens, true) + '; }'); // eslint-disable-line no-new-func\n  return function () {\n    return f.apply(expr, arguments);\n  };\n};\n\nvar TEOF = 'TEOF';\nvar TOP = 'TOP';\nvar TNUMBER = 'TNUMBER';\nvar TSTRING = 'TSTRING';\nvar TPAREN = 'TPAREN';\nvar TBRACKET = 'TBRACKET';\nvar TCOMMA = 'TCOMMA';\nvar TNAME = 'TNAME';\nvar TSEMICOLON = 'TSEMICOLON';\n\nfunction Token(type, value, index) {\n  this.type = type;\n  this.value = value;\n  this.index = index;\n}\n\nToken.prototype.toString = function () {\n  return this.type + ': ' + this.value;\n};\n\nfunction TokenStream(parser, expression) {\n  this.pos = 0;\n  this.current = null;\n  this.unaryOps = parser.unaryOps;\n  this.binaryOps = parser.binaryOps;\n  this.ternaryOps = parser.ternaryOps;\n  this.consts = parser.consts;\n  this.expression = expression;\n  this.savedPosition = 0;\n  this.savedCurrent = null;\n  this.options = parser.options;\n  this.parser = parser;\n}\n\nTokenStream.prototype.newToken = function (type, value, pos) {\n  return new Token(type, value, pos != null ? pos : this.pos);\n};\n\nTokenStream.prototype.save = function () {\n  this.savedPosition = this.pos;\n  this.savedCurrent = this.current;\n};\n\nTokenStream.prototype.restore = function () {\n  this.pos = this.savedPosition;\n  this.current = this.savedCurrent;\n};\n\nTokenStream.prototype.next = function () {\n  if (this.pos >= this.expression.length) {\n    return this.newToken(TEOF, 'EOF');\n  }\n\n  if (this.isWhitespace() || this.isComment()) {\n    return this.next();\n  } else if (this.isRadixInteger() ||\n      this.isNumber() ||\n      this.isOperator() ||\n      this.isString() ||\n      this.isParen() ||\n      this.isBracket() ||\n      this.isComma() ||\n      this.isSemicolon() ||\n      this.isNamedOp() ||\n      this.isConst() ||\n      this.isName()) {\n    return this.current;\n  } else {\n    this.parseError('Unknown character \"' + this.expression.charAt(this.pos) + '\"');\n  }\n};\n\nTokenStream.prototype.isString = function () {\n  var r = false;\n  var startPos = this.pos;\n  var quote = this.expression.charAt(startPos);\n\n  if (quote === '\\'' || quote === '\"') {\n    var index = this.expression.indexOf(quote, startPos + 1);\n    while (index >= 0 && this.pos < this.expression.length) {\n      this.pos = index + 1;\n      if (this.expression.charAt(index - 1) !== '\\\\') {\n        var rawString = this.expression.substring(startPos + 1, index);\n        this.current = this.newToken(TSTRING, this.unescape(rawString), startPos);\n        r = true;\n        break;\n      }\n      index = this.expression.indexOf(quote, index + 1);\n    }\n  }\n  return r;\n};\n\nTokenStream.prototype.isParen = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === '(' || c === ')') {\n    this.current = this.newToken(TPAREN, c);\n    this.pos++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isBracket = function () {\n  var c = this.expression.charAt(this.pos);\n  if ((c === '[' || c === ']') && this.isOperatorEnabled('[')) {\n    this.current = this.newToken(TBRACKET, c);\n    this.pos++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isComma = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === ',') {\n    this.current = this.newToken(TCOMMA, ',');\n    this.pos++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isSemicolon = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === ';') {\n    this.current = this.newToken(TSEMICOLON, ';');\n    this.pos++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isConst = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos || (c !== '_' && c !== '.' && (c < '0' || c > '9'))) {\n        break;\n      }\n    }\n  }\n  if (i > startPos) {\n    var str = this.expression.substring(startPos, i);\n    if (str in this.consts) {\n      this.current = this.newToken(TNUMBER, this.consts[str]);\n      this.pos += str.length;\n      return true;\n    }\n  }\n  return false;\n};\n\nTokenStream.prototype.isNamedOp = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos || (c !== '_' && (c < '0' || c > '9'))) {\n        break;\n      }\n    }\n  }\n  if (i > startPos) {\n    var str = this.expression.substring(startPos, i);\n    if (this.isOperatorEnabled(str) && (str in this.binaryOps || str in this.unaryOps || str in this.ternaryOps)) {\n      this.current = this.newToken(TOP, str);\n      this.pos += str.length;\n      return true;\n    }\n  }\n  return false;\n};\n\nTokenStream.prototype.isName = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  var hasLetter = false;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos && (c === '$' || c === '_')) {\n        if (c === '_') {\n          hasLetter = true;\n        }\n        continue;\n      } else if (i === this.pos || !hasLetter || (c !== '_' && (c < '0' || c > '9'))) {\n        break;\n      }\n    } else {\n      hasLetter = true;\n    }\n  }\n  if (hasLetter) {\n    var str = this.expression.substring(startPos, i);\n    this.current = this.newToken(TNAME, str);\n    this.pos += str.length;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isWhitespace = function () {\n  var r = false;\n  var c = this.expression.charAt(this.pos);\n  while (c === ' ' || c === '\\t' || c === '\\n' || c === '\\r') {\n    r = true;\n    this.pos++;\n    if (this.pos >= this.expression.length) {\n      break;\n    }\n    c = this.expression.charAt(this.pos);\n  }\n  return r;\n};\n\nvar codePointPattern = /^[0-9a-f]{4}$/i;\n\nTokenStream.prototype.unescape = function (v) {\n  var index = v.indexOf('\\\\');\n  if (index < 0) {\n    return v;\n  }\n\n  var buffer = v.substring(0, index);\n  while (index >= 0) {\n    var c = v.charAt(++index);\n    switch (c) {\n      case '\\'':\n        buffer += '\\'';\n        break;\n      case '\"':\n        buffer += '\"';\n        break;\n      case '\\\\':\n        buffer += '\\\\';\n        break;\n      case '/':\n        buffer += '/';\n        break;\n      case 'b':\n        buffer += '\\b';\n        break;\n      case 'f':\n        buffer += '\\f';\n        break;\n      case 'n':\n        buffer += '\\n';\n        break;\n      case 'r':\n        buffer += '\\r';\n        break;\n      case 't':\n        buffer += '\\t';\n        break;\n      case 'u':\n        // interpret the following 4 characters as the hex of the unicode code point\n        var codePoint = v.substring(index + 1, index + 5);\n        if (!codePointPattern.test(codePoint)) {\n          this.parseError('Illegal escape sequence: \\\\u' + codePoint);\n        }\n        buffer += String.fromCharCode(parseInt(codePoint, 16));\n        index += 4;\n        break;\n      default:\n        throw this.parseError('Illegal escape sequence: \"\\\\' + c + '\"');\n    }\n    ++index;\n    var backslash = v.indexOf('\\\\', index);\n    buffer += v.substring(index, backslash < 0 ? v.length : backslash);\n    index = backslash;\n  }\n\n  return buffer;\n};\n\nTokenStream.prototype.isComment = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === '/' && this.expression.charAt(this.pos + 1) === '*') {\n    this.pos = this.expression.indexOf('*/', this.pos) + 2;\n    if (this.pos === 1) {\n      this.pos = this.expression.length;\n    }\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isRadixInteger = function () {\n  var pos = this.pos;\n\n  if (pos >= this.expression.length - 2 || this.expression.charAt(pos) !== '0') {\n    return false;\n  }\n  ++pos;\n\n  var radix;\n  var validDigit;\n  if (this.expression.charAt(pos) === 'x') {\n    radix = 16;\n    validDigit = /^[0-9a-f]$/i;\n    ++pos;\n  } else if (this.expression.charAt(pos) === 'b') {\n    radix = 2;\n    validDigit = /^[01]$/i;\n    ++pos;\n  } else {\n    return false;\n  }\n\n  var valid = false;\n  var startPos = pos;\n\n  while (pos < this.expression.length) {\n    var c = this.expression.charAt(pos);\n    if (validDigit.test(c)) {\n      pos++;\n      valid = true;\n    } else {\n      break;\n    }\n  }\n\n  if (valid) {\n    this.current = this.newToken(TNUMBER, parseInt(this.expression.substring(startPos, pos), radix));\n    this.pos = pos;\n  }\n  return valid;\n};\n\nTokenStream.prototype.isNumber = function () {\n  var valid = false;\n  var pos = this.pos;\n  var startPos = pos;\n  var resetPos = pos;\n  var foundDot = false;\n  var foundDigits = false;\n  var c;\n\n  while (pos < this.expression.length) {\n    c = this.expression.charAt(pos);\n    if ((c >= '0' && c <= '9') || (!foundDot && c === '.')) {\n      if (c === '.') {\n        foundDot = true;\n      } else {\n        foundDigits = true;\n      }\n      pos++;\n      valid = foundDigits;\n    } else {\n      break;\n    }\n  }\n\n  if (valid) {\n    resetPos = pos;\n  }\n\n  if (c === 'e' || c === 'E') {\n    pos++;\n    var acceptSign = true;\n    var validExponent = false;\n    while (pos < this.expression.length) {\n      c = this.expression.charAt(pos);\n      if (acceptSign && (c === '+' || c === '-')) {\n        acceptSign = false;\n      } else if (c >= '0' && c <= '9') {\n        validExponent = true;\n        acceptSign = false;\n      } else {\n        break;\n      }\n      pos++;\n    }\n\n    if (!validExponent) {\n      pos = resetPos;\n    }\n  }\n\n  if (valid) {\n    this.current = this.newToken(TNUMBER, parseFloat(this.expression.substring(startPos, pos)));\n    this.pos = pos;\n  } else {\n    this.pos = resetPos;\n  }\n  return valid;\n};\n\nTokenStream.prototype.isOperator = function () {\n  var startPos = this.pos;\n  var c = this.expression.charAt(this.pos);\n\n  if (c === '+' || c === '-' || c === '*' || c === '/' || c === '%' || c === '^' || c === '?' || c === ':' || c === '.') {\n    this.current = this.newToken(TOP, c);\n  } else if (c === '' || c === '') {\n    this.current = this.newToken(TOP, '*');\n  } else if (c === '>') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '>=');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, '>');\n    }\n  } else if (c === '<') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '<=');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, '<');\n    }\n  } else if (c === '|') {\n    if (this.expression.charAt(this.pos + 1) === '|') {\n      this.current = this.newToken(TOP, '||');\n      this.pos++;\n    } else {\n      return false;\n    }\n  } else if (c === '=') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '==');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, c);\n    }\n  } else if (c === '!') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '!=');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, c);\n    }\n  } else {\n    return false;\n  }\n  this.pos++;\n\n  if (this.isOperatorEnabled(this.current.value)) {\n    return true;\n  } else {\n    this.pos = startPos;\n    return false;\n  }\n};\n\nTokenStream.prototype.isOperatorEnabled = function (op) {\n  return this.parser.isOperatorEnabled(op);\n};\n\nTokenStream.prototype.getCoordinates = function () {\n  var line = 0;\n  var column;\n  var newline = -1;\n  do {\n    line++;\n    column = this.pos - newline;\n    newline = this.expression.indexOf('\\n', newline + 1);\n  } while (newline >= 0 && newline < this.pos);\n\n  return {\n    line: line,\n    column: column\n  };\n};\n\nTokenStream.prototype.parseError = function (msg) {\n  var coords = this.getCoordinates();\n  throw new Error('parse error [' + coords.line + ':' + coords.column + ']: ' + msg);\n};\n\nfunction ParserState(parser, tokenStream, options) {\n  this.parser = parser;\n  this.tokens = tokenStream;\n  this.current = null;\n  this.nextToken = null;\n  this.next();\n  this.savedCurrent = null;\n  this.savedNextToken = null;\n  this.allowMemberAccess = options.allowMemberAccess !== false;\n}\n\nParserState.prototype.next = function () {\n  this.current = this.nextToken;\n  return (this.nextToken = this.tokens.next());\n};\n\nParserState.prototype.tokenMatches = function (token, value) {\n  if (typeof value === 'undefined') {\n    return true;\n  } else if (Array.isArray(value)) {\n    return contains(value, token.value);\n  } else if (typeof value === 'function') {\n    return value(token);\n  } else {\n    return token.value === value;\n  }\n};\n\nParserState.prototype.save = function () {\n  this.savedCurrent = this.current;\n  this.savedNextToken = this.nextToken;\n  this.tokens.save();\n};\n\nParserState.prototype.restore = function () {\n  this.tokens.restore();\n  this.current = this.savedCurrent;\n  this.nextToken = this.savedNextToken;\n};\n\nParserState.prototype.accept = function (type, value) {\n  if (this.nextToken.type === type && this.tokenMatches(this.nextToken, value)) {\n    this.next();\n    return true;\n  }\n  return false;\n};\n\nParserState.prototype.expect = function (type, value) {\n  if (!this.accept(type, value)) {\n    var coords = this.tokens.getCoordinates();\n    throw new Error('parse error [' + coords.line + ':' + coords.column + ']: Expected ' + (value || type));\n  }\n};\n\nParserState.prototype.parseAtom = function (instr) {\n  var unaryOps = this.tokens.unaryOps;\n  function isPrefixOperator(token) {\n    return token.value in unaryOps;\n  }\n\n  if (this.accept(TNAME) || this.accept(TOP, isPrefixOperator)) {\n    instr.push(new Instruction(IVAR, this.current.value));\n  } else if (this.accept(TNUMBER)) {\n    instr.push(new Instruction(INUMBER, this.current.value));\n  } else if (this.accept(TSTRING)) {\n    instr.push(new Instruction(INUMBER, this.current.value));\n  } else if (this.accept(TPAREN, '(')) {\n    this.parseExpression(instr);\n    this.expect(TPAREN, ')');\n  } else if (this.accept(TBRACKET, '[')) {\n    if (this.accept(TBRACKET, ']')) {\n      instr.push(new Instruction(IARRAY, 0));\n    } else {\n      var argCount = this.parseArrayList(instr);\n      instr.push(new Instruction(IARRAY, argCount));\n    }\n  } else {\n    throw new Error('unexpected ' + this.nextToken);\n  }\n};\n\nParserState.prototype.parseExpression = function (instr) {\n  var exprInstr = [];\n  if (this.parseUntilEndStatement(instr, exprInstr)) {\n    return;\n  }\n  this.parseVariableAssignmentExpression(exprInstr);\n  if (this.parseUntilEndStatement(instr, exprInstr)) {\n    return;\n  }\n  this.pushExpression(instr, exprInstr);\n};\n\nParserState.prototype.pushExpression = function (instr, exprInstr) {\n  for (var i = 0, len = exprInstr.length; i < len; i++) {\n    instr.push(exprInstr[i]);\n  }\n};\n\nParserState.prototype.parseUntilEndStatement = function (instr, exprInstr) {\n  if (!this.accept(TSEMICOLON)) return false;\n  if (this.nextToken && this.nextToken.type !== TEOF && !(this.nextToken.type === TPAREN && this.nextToken.value === ')')) {\n    exprInstr.push(new Instruction(IENDSTATEMENT));\n  }\n  if (this.nextToken.type !== TEOF) {\n    this.parseExpression(exprInstr);\n  }\n  instr.push(new Instruction(IEXPR, exprInstr));\n  return true;\n};\n\nParserState.prototype.parseArrayList = function (instr) {\n  var argCount = 0;\n\n  while (!this.accept(TBRACKET, ']')) {\n    this.parseExpression(instr);\n    ++argCount;\n    while (this.accept(TCOMMA)) {\n      this.parseExpression(instr);\n      ++argCount;\n    }\n  }\n\n  return argCount;\n};\n\nParserState.prototype.parseVariableAssignmentExpression = function (instr) {\n  this.parseConditionalExpression(instr);\n  while (this.accept(TOP, '=')) {\n    var varName = instr.pop();\n    var varValue = [];\n    var lastInstrIndex = instr.length - 1;\n    if (varName.type === IFUNCALL) {\n      if (!this.tokens.isOperatorEnabled('()=')) {\n        throw new Error('function definition is not permitted');\n      }\n      for (var i = 0, len = varName.value + 1; i < len; i++) {\n        var index = lastInstrIndex - i;\n        if (instr[index].type === IVAR) {\n          instr[index] = new Instruction(IVARNAME, instr[index].value);\n        }\n      }\n      this.parseVariableAssignmentExpression(varValue);\n      instr.push(new Instruction(IEXPR, varValue));\n      instr.push(new Instruction(IFUNDEF, varName.value));\n      continue;\n    }\n    if (varName.type !== IVAR && varName.type !== IMEMBER) {\n      throw new Error('expected variable for assignment');\n    }\n    this.parseVariableAssignmentExpression(varValue);\n    instr.push(new Instruction(IVARNAME, varName.value));\n    instr.push(new Instruction(IEXPR, varValue));\n    instr.push(binaryInstruction('='));\n  }\n};\n\nParserState.prototype.parseConditionalExpression = function (instr) {\n  this.parseOrExpression(instr);\n  while (this.accept(TOP, '?')) {\n    var trueBranch = [];\n    var falseBranch = [];\n    this.parseConditionalExpression(trueBranch);\n    this.expect(TOP, ':');\n    this.parseConditionalExpression(falseBranch);\n    instr.push(new Instruction(IEXPR, trueBranch));\n    instr.push(new Instruction(IEXPR, falseBranch));\n    instr.push(ternaryInstruction('?'));\n  }\n};\n\nParserState.prototype.parseOrExpression = function (instr) {\n  this.parseAndExpression(instr);\n  while (this.accept(TOP, 'or')) {\n    var falseBranch = [];\n    this.parseAndExpression(falseBranch);\n    instr.push(new Instruction(IEXPR, falseBranch));\n    instr.push(binaryInstruction('or'));\n  }\n};\n\nParserState.prototype.parseAndExpression = function (instr) {\n  this.parseComparison(instr);\n  while (this.accept(TOP, 'and')) {\n    var trueBranch = [];\n    this.parseComparison(trueBranch);\n    instr.push(new Instruction(IEXPR, trueBranch));\n    instr.push(binaryInstruction('and'));\n  }\n};\n\nvar COMPARISON_OPERATORS = ['==', '!=', '<', '<=', '>=', '>', 'in'];\n\nParserState.prototype.parseComparison = function (instr) {\n  this.parseAddSub(instr);\n  while (this.accept(TOP, COMPARISON_OPERATORS)) {\n    var op = this.current;\n    this.parseAddSub(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nvar ADD_SUB_OPERATORS = ['+', '-', '||'];\n\nParserState.prototype.parseAddSub = function (instr) {\n  this.parseTerm(instr);\n  while (this.accept(TOP, ADD_SUB_OPERATORS)) {\n    var op = this.current;\n    this.parseTerm(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nvar TERM_OPERATORS = ['*', '/', '%'];\n\nParserState.prototype.parseTerm = function (instr) {\n  this.parseFactor(instr);\n  while (this.accept(TOP, TERM_OPERATORS)) {\n    var op = this.current;\n    this.parseFactor(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nParserState.prototype.parseFactor = function (instr) {\n  var unaryOps = this.tokens.unaryOps;\n  function isPrefixOperator(token) {\n    return token.value in unaryOps;\n  }\n\n  this.save();\n  if (this.accept(TOP, isPrefixOperator)) {\n    if (this.current.value !== '-' && this.current.value !== '+') {\n      if (this.nextToken.type === TPAREN && this.nextToken.value === '(') {\n        this.restore();\n        this.parseExponential(instr);\n        return;\n      } else if (this.nextToken.type === TSEMICOLON || this.nextToken.type === TCOMMA || this.nextToken.type === TEOF || (this.nextToken.type === TPAREN && this.nextToken.value === ')')) {\n        this.restore();\n        this.parseAtom(instr);\n        return;\n      }\n    }\n\n    var op = this.current;\n    this.parseFactor(instr);\n    instr.push(unaryInstruction(op.value));\n  } else {\n    this.parseExponential(instr);\n  }\n};\n\nParserState.prototype.parseExponential = function (instr) {\n  this.parsePostfixExpression(instr);\n  while (this.accept(TOP, '^')) {\n    this.parseFactor(instr);\n    instr.push(binaryInstruction('^'));\n  }\n};\n\nParserState.prototype.parsePostfixExpression = function (instr) {\n  this.parseFunctionCall(instr);\n  while (this.accept(TOP, '!')) {\n    instr.push(unaryInstruction('!'));\n  }\n};\n\nParserState.prototype.parseFunctionCall = function (instr) {\n  var unaryOps = this.tokens.unaryOps;\n  function isPrefixOperator(token) {\n    return token.value in unaryOps;\n  }\n\n  if (this.accept(TOP, isPrefixOperator)) {\n    var op = this.current;\n    this.parseAtom(instr);\n    instr.push(unaryInstruction(op.value));\n  } else {\n    this.parseMemberExpression(instr);\n    while (this.accept(TPAREN, '(')) {\n      if (this.accept(TPAREN, ')')) {\n        instr.push(new Instruction(IFUNCALL, 0));\n      } else {\n        var argCount = this.parseArgumentList(instr);\n        instr.push(new Instruction(IFUNCALL, argCount));\n      }\n    }\n  }\n};\n\nParserState.prototype.parseArgumentList = function (instr) {\n  var argCount = 0;\n\n  while (!this.accept(TPAREN, ')')) {\n    this.parseExpression(instr);\n    ++argCount;\n    while (this.accept(TCOMMA)) {\n      this.parseExpression(instr);\n      ++argCount;\n    }\n  }\n\n  return argCount;\n};\n\nParserState.prototype.parseMemberExpression = function (instr) {\n  this.parseAtom(instr);\n  while (this.accept(TOP, '.') || this.accept(TBRACKET, '[')) {\n    var op = this.current;\n\n    if (op.value === '.') {\n      if (!this.allowMemberAccess) {\n        throw new Error('unexpected \".\", member access is not permitted');\n      }\n\n      this.expect(TNAME);\n      instr.push(new Instruction(IMEMBER, this.current.value));\n    } else if (op.value === '[') {\n      if (!this.tokens.isOperatorEnabled('[')) {\n        throw new Error('unexpected \"[]\", arrays are disabled');\n      }\n\n      this.parseExpression(instr);\n      this.expect(TBRACKET, ']');\n      instr.push(binaryInstruction('['));\n    } else {\n      throw new Error('unexpected symbol: ' + op.value);\n    }\n  }\n};\n\nfunction add(a, b) {\n  return Number(a) + Number(b);\n}\n\nfunction sub(a, b) {\n  return a - b;\n}\n\nfunction mul(a, b) {\n  return a * b;\n}\n\nfunction div(a, b) {\n  return a / b;\n}\n\nfunction mod(a, b) {\n  return a % b;\n}\n\nfunction concat(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.concat(b);\n  }\n  return '' + a + b;\n}\n\nfunction equal(a, b) {\n  return a === b;\n}\n\nfunction notEqual(a, b) {\n  return a !== b;\n}\n\nfunction greaterThan(a, b) {\n  return a > b;\n}\n\nfunction lessThan(a, b) {\n  return a < b;\n}\n\nfunction greaterThanEqual(a, b) {\n  return a >= b;\n}\n\nfunction lessThanEqual(a, b) {\n  return a <= b;\n}\n\nfunction andOperator(a, b) {\n  return Boolean(a && b);\n}\n\nfunction orOperator(a, b) {\n  return Boolean(a || b);\n}\n\nfunction inOperator(a, b) {\n  return contains(b, a);\n}\n\nfunction sinh(a) {\n  return ((Math.exp(a) - Math.exp(-a)) / 2);\n}\n\nfunction cosh(a) {\n  return ((Math.exp(a) + Math.exp(-a)) / 2);\n}\n\nfunction tanh(a) {\n  if (a === Infinity) return 1;\n  if (a === -Infinity) return -1;\n  return (Math.exp(a) - Math.exp(-a)) / (Math.exp(a) + Math.exp(-a));\n}\n\nfunction asinh(a) {\n  if (a === -Infinity) return a;\n  return Math.log(a + Math.sqrt((a * a) + 1));\n}\n\nfunction acosh(a) {\n  return Math.log(a + Math.sqrt((a * a) - 1));\n}\n\nfunction atanh(a) {\n  return (Math.log((1 + a) / (1 - a)) / 2);\n}\n\nfunction log10(a) {\n  return Math.log(a) * Math.LOG10E;\n}\n\nfunction neg(a) {\n  return -a;\n}\n\nfunction not(a) {\n  return !a;\n}\n\nfunction trunc(a) {\n  return a < 0 ? Math.ceil(a) : Math.floor(a);\n}\n\nfunction random(a) {\n  return Math.random() * (a || 1);\n}\n\nfunction factorial(a) { // a!\n  return gamma(a + 1);\n}\n\nfunction isInteger(value) {\n  return isFinite(value) && (value === Math.round(value));\n}\n\nvar GAMMA_G = 4.7421875;\nvar GAMMA_P = [\n  0.99999999999999709182,\n  57.156235665862923517, -59.597960355475491248,\n  14.136097974741747174, -0.49191381609762019978,\n  0.33994649984811888699e-4,\n  0.46523628927048575665e-4, -0.98374475304879564677e-4,\n  0.15808870322491248884e-3, -0.21026444172410488319e-3,\n  0.21743961811521264320e-3, -0.16431810653676389022e-3,\n  0.84418223983852743293e-4, -0.26190838401581408670e-4,\n  0.36899182659531622704e-5\n];\n\n// Gamma function from math.js\nfunction gamma(n) {\n  var t, x;\n\n  if (isInteger(n)) {\n    if (n <= 0) {\n      return isFinite(n) ? Infinity : NaN;\n    }\n\n    if (n > 171) {\n      return Infinity; // Will overflow\n    }\n\n    var value = n - 2;\n    var res = n - 1;\n    while (value > 1) {\n      res *= value;\n      value--;\n    }\n\n    if (res === 0) {\n      res = 1; // 0! is per definition 1\n    }\n\n    return res;\n  }\n\n  if (n < 0.5) {\n    return Math.PI / (Math.sin(Math.PI * n) * gamma(1 - n));\n  }\n\n  if (n >= 171.35) {\n    return Infinity; // will overflow\n  }\n\n  if (n > 85.0) { // Extended Stirling Approx\n    var twoN = n * n;\n    var threeN = twoN * n;\n    var fourN = threeN * n;\n    var fiveN = fourN * n;\n    return Math.sqrt(2 * Math.PI / n) * Math.pow((n / Math.E), n) *\n      (1 + (1 / (12 * n)) + (1 / (288 * twoN)) - (139 / (51840 * threeN)) -\n      (571 / (2488320 * fourN)) + (163879 / (209018880 * fiveN)) +\n      (5246819 / (75246796800 * fiveN * n)));\n  }\n\n  --n;\n  x = GAMMA_P[0];\n  for (var i = 1; i < GAMMA_P.length; ++i) {\n    x += GAMMA_P[i] / (n + i);\n  }\n\n  t = n + GAMMA_G + 0.5;\n  return Math.sqrt(2 * Math.PI) * Math.pow(t, n + 0.5) * Math.exp(-t) * x;\n}\n\nfunction stringOrArrayLength(s) {\n  if (Array.isArray(s)) {\n    return s.length;\n  }\n  return String(s).length;\n}\n\nfunction hypot() {\n  var sum = 0;\n  var larg = 0;\n  for (var i = 0; i < arguments.length; i++) {\n    var arg = Math.abs(arguments[i]);\n    var div;\n    if (larg < arg) {\n      div = larg / arg;\n      sum = (sum * div * div) + 1;\n      larg = arg;\n    } else if (arg > 0) {\n      div = arg / larg;\n      sum += div * div;\n    } else {\n      sum += arg;\n    }\n  }\n  return larg === Infinity ? Infinity : larg * Math.sqrt(sum);\n}\n\nfunction condition(cond, yep, nope) {\n  return cond ? yep : nope;\n}\n\n/**\n* Decimal adjustment of a number.\n* From @escopecz.\n*\n* @param {Number} value The number.\n* @param {Integer} exp  The exponent (the 10 logarithm of the adjustment base).\n* @return {Number} The adjusted value.\n*/\nfunction roundTo(value, exp) {\n  // If the exp is undefined or zero...\n  if (typeof exp === 'undefined' || +exp === 0) {\n    return Math.round(value);\n  }\n  value = +value;\n  exp = -(+exp);\n  // If the value is not a number or the exp is not an integer...\n  if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {\n    return NaN;\n  }\n  // Shift\n  value = value.toString().split('e');\n  value = Math.round(+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));\n  // Shift back\n  value = value.toString().split('e');\n  return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));\n}\n\nfunction setVar(name, value, variables) {\n  if (variables) variables[name] = value;\n  return value;\n}\n\nfunction arrayIndex(array, index) {\n  return array[index | 0];\n}\n\nfunction max(array) {\n  if (arguments.length === 1 && Array.isArray(array)) {\n    return Math.max.apply(Math, array);\n  } else {\n    return Math.max.apply(Math, arguments);\n  }\n}\n\nfunction min(array) {\n  if (arguments.length === 1 && Array.isArray(array)) {\n    return Math.min.apply(Math, array);\n  } else {\n    return Math.min.apply(Math, arguments);\n  }\n}\n\nfunction arrayMap(f, a) {\n  if (typeof f !== 'function') {\n    throw new Error('First argument to map is not a function');\n  }\n  if (!Array.isArray(a)) {\n    throw new Error('Second argument to map is not an array');\n  }\n  return a.map(function (x, i) {\n    return f(x, i);\n  });\n}\n\nfunction arrayFold(f, init, a) {\n  if (typeof f !== 'function') {\n    throw new Error('First argument to fold is not a function');\n  }\n  if (!Array.isArray(a)) {\n    throw new Error('Second argument to fold is not an array');\n  }\n  return a.reduce(function (acc, x, i) {\n    return f(acc, x, i);\n  }, init);\n}\n\nfunction arrayFilter(f, a) {\n  if (typeof f !== 'function') {\n    throw new Error('First argument to filter is not a function');\n  }\n  if (!Array.isArray(a)) {\n    throw new Error('Second argument to filter is not an array');\n  }\n  return a.filter(function (x, i) {\n    return f(x, i);\n  });\n}\n\nfunction stringOrArrayIndexOf(target, s) {\n  if (!(Array.isArray(s) || typeof s === 'string')) {\n    throw new Error('Second argument to indexOf is not a string or array');\n  }\n\n  return s.indexOf(target);\n}\n\nfunction arrayJoin(sep, a) {\n  if (!Array.isArray(a)) {\n    throw new Error('Second argument to join is not an array');\n  }\n\n  return a.join(sep);\n}\n\nfunction sign(x) {\n  return ((x > 0) - (x < 0)) || +x;\n}\n\nvar ONE_THIRD = 1/3;\nfunction cbrt(x) {\n  return x < 0 ? -Math.pow(-x, ONE_THIRD) : Math.pow(x, ONE_THIRD);\n}\n\nfunction expm1(x) {\n  return Math.exp(x) - 1;\n}\n\nfunction log1p(x) {\n  return Math.log(1 + x);\n}\n\nfunction log2(x) {\n  return Math.log(x) / Math.LN2;\n}\n\nfunction Parser(options) {\n  this.options = options || {};\n  this.unaryOps = {\n    sin: Math.sin,\n    cos: Math.cos,\n    tan: Math.tan,\n    asin: Math.asin,\n    acos: Math.acos,\n    atan: Math.atan,\n    sinh: Math.sinh || sinh,\n    cosh: Math.cosh || cosh,\n    tanh: Math.tanh || tanh,\n    asinh: Math.asinh || asinh,\n    acosh: Math.acosh || acosh,\n    atanh: Math.atanh || atanh,\n    sqrt: Math.sqrt,\n    cbrt: Math.cbrt || cbrt,\n    log: Math.log,\n    log2: Math.log2 || log2,\n    ln: Math.log,\n    lg: Math.log10 || log10,\n    log10: Math.log10 || log10,\n    expm1: Math.expm1 || expm1,\n    log1p: Math.log1p || log1p,\n    abs: Math.abs,\n    ceil: Math.ceil,\n    floor: Math.floor,\n    round: Math.round,\n    trunc: Math.trunc || trunc,\n    '-': neg,\n    '+': Number,\n    exp: Math.exp,\n    not: not,\n    length: stringOrArrayLength,\n    '!': factorial,\n    sign: Math.sign || sign\n  };\n\n  this.binaryOps = {\n    '+': add,\n    '-': sub,\n    '*': mul,\n    '/': div,\n    '%': mod,\n    '^': Math.pow,\n    '||': concat,\n    '==': equal,\n    '!=': notEqual,\n    '>': greaterThan,\n    '<': lessThan,\n    '>=': greaterThanEqual,\n    '<=': lessThanEqual,\n    and: andOperator,\n    or: orOperator,\n    'in': inOperator,\n    '=': setVar,\n    '[': arrayIndex\n  };\n\n  this.ternaryOps = {\n    '?': condition\n  };\n\n  this.functions = {\n    random: random,\n    fac: factorial,\n    min: min,\n    max: max,\n    hypot: Math.hypot || hypot,\n    pyt: Math.hypot || hypot, // backward compat\n    pow: Math.pow,\n    atan2: Math.atan2,\n    'if': condition,\n    gamma: gamma,\n    roundTo: roundTo,\n    map: arrayMap,\n    fold: arrayFold,\n    filter: arrayFilter,\n    indexOf: stringOrArrayIndexOf,\n    join: arrayJoin\n  };\n\n  this.consts = {\n    E: Math.E,\n    PI: Math.PI,\n    'true': true,\n    'false': false\n  };\n}\n\nParser.prototype.parse = function (expr) {\n  var instr = [];\n  var parserState = new ParserState(\n    this,\n    new TokenStream(this, expr),\n    { allowMemberAccess: this.options.allowMemberAccess }\n  );\n\n  parserState.parseExpression(instr);\n  parserState.expect(TEOF, 'EOF');\n\n  return new Expression(instr, this);\n};\n\nParser.prototype.evaluate = function (expr, variables) {\n  return this.parse(expr).evaluate(variables);\n};\n\nvar sharedParser = new Parser();\n\nParser.parse = function (expr) {\n  return sharedParser.parse(expr);\n};\n\nParser.evaluate = function (expr, variables) {\n  return sharedParser.parse(expr).evaluate(variables);\n};\n\nvar optionNameMap = {\n  '+': 'add',\n  '-': 'subtract',\n  '*': 'multiply',\n  '/': 'divide',\n  '%': 'remainder',\n  '^': 'power',\n  '!': 'factorial',\n  '<': 'comparison',\n  '>': 'comparison',\n  '<=': 'comparison',\n  '>=': 'comparison',\n  '==': 'comparison',\n  '!=': 'comparison',\n  '||': 'concatenate',\n  'and': 'logical',\n  'or': 'logical',\n  'not': 'logical',\n  '?': 'conditional',\n  ':': 'conditional',\n  '=': 'assignment',\n  '[': 'array',\n  '()=': 'fndef'\n};\n\nfunction getOptionName(op) {\n  return optionNameMap.hasOwnProperty(op) ? optionNameMap[op] : op;\n}\n\nParser.prototype.isOperatorEnabled = function (op) {\n  var optionName = getOptionName(op);\n  var operators = this.options.operators || {};\n\n  return !(optionName in operators) || !!operators[optionName];\n};\n\n/*!\n Based on ndef.parser, by Raphael Graf(r@undefined.ch)\n http://www.undefined.ch/mparser/index.html\n\n Ported to JavaScript and modified by Matthew Crumley (email@matthewcrumley.com, http://silentmatt.com/)\n\n You are free to use and modify this code in anyway you find useful. Please leave this comment in the code\n to acknowledge its original source. If you feel like it, I enjoy hearing about projects that use my code,\n but don't feel like you have to let me know or ask permission.\n*/\n\n// Backwards compatibility\nvar index = {\n  Parser: Parser,\n  Expression: Expression\n};\n\nexport default index;\nexport { Expression, Parser };\n","/** @format */\nimport calcUI from \"./calcui\";\nconst Parser = require(\"expr-eval\").Parser;\nconst parser = new Parser();\n\nexport const Calc = () => {\n  const controlCheck = [\"escape\", \"delete\", \"backspace\", \"enter\", \"return\"];\n  const operatorCheck = [\"+\", \"-\", \"*\", \"/\"];\n  const periodCheck = \".\";\n  const integerCheck = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\n  let calcInput = \"\";\n\n  const fixLength = (input) => {\n    // let endChange = calcInput.slice(0, calcInput.length - 1);\n    // calcInput = endChange;\n    // calcUI.render(calcInput);\n  };\n\n  // const posOrNeg = () => {\n  //   try {\n  //     if (Parser.parse(calcInput)) {\n  //     }\n  //     if (false) {\n  //     }\n  //   } catch (e) {\n  //     console.log(e)\n  //   }\n  // };\n\n  const ifControl = (input) => {\n    console.log(input);\n    if (input === \"enter\" || input === \"return\") {\n      try {\n        let calculate = Parser.evaluate(calcInput);\n        calcInput = calculate;\n        calcUI.render(calcInput);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n    if (input === \"backspace\" || input === \"delete\") {\n      if (calcInput.length > 0) {\n        let inputChange = calcInput.slice(0, calcInput.length - 1);\n        calcInput = inputChange;\n        calcUI.render(calcInput);\n      }\n    }\n    if (input === \"escape\") {\n      calcInput = \"\";\n      calcUI.render(calcInput);\n    }\n  };\n\n  const addInteger = (input) => {\n    calcInput += input;\n    calcUI.render(calcInput);\n  };\n\n  const ifOperation = (input) => {\n    if (calcInput.length < 1) {\n      calcInput += 0 + input;\n      calcUI.render(calcInput);\n    }\n\n    if (!operatorCheck.includes(calcInput[calcInput.length - 1])) {\n      calcInput += input;\n      calcUI.render(calcInput);\n    }\n\n    if (operatorCheck.includes(calcInput[calcInput.length - 1])) {\n      let operatorChange = calcInput.slice(0, calcInput.length - 1);\n      calcInput = operatorChange;\n      calcInput += input;\n      calcUI.render(calcInput);\n    }\n  };\n\n  const ifPeriod = (input) => {\n    console.log(calcInput);\n    try {\n      if (calcInput[calcInput.length - 1] === \".\") {\n      }\n\n      if (\n        calcInput[calcInput.length - 1] === \"+\" ||\n        calcInput[calcInput.length - 1] === \"-\" ||\n        calcInput[calcInput.length - 1] === \"/\" ||\n        calcInput[calcInput.length - 1] === \"*\" ||\n        calcInput.length === 0\n      ) {\n        calcInput += \"0.\";\n        calcUI.render(calcInput);\n      }\n      if (\n        Parser.parse(calcInput).tokens.length === 1 &&\n        Parser.parse(calcInput).tokens[0].value.toString().indexOf(\".\") === -1\n      ) {\n        console.log(\n          Parser.parse(calcInput).tokens[0].value.toString().indexOf(\".\")\n        );\n        calcInput += \".\";\n        calcUI.render(calcInput);\n        console.log(Parser.parse(calcInput).tokens[0].value.toString());\n      }\n      if (\n        Parser.parse(calcInput).tokens.length > 1 &&\n        Parser.parse(calcInput)\n          .tokens[Parser.parse(calcInput).tokens.length - 2].value.toString()\n          .indexOf(\".\") === -1\n      ) {\n        console.log(\n          Parser.parse(calcInput).tokens[\n            Parser.parse(calcInput).tokens.length - 2\n          ]\n        );\n        calcInput += \".\";\n        calcUI.render(calcInput);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const registerInput = (input) => {\n    document.addEventListener(\"keydown\", (event) => {\n      let trigger = String(event.key).toLowerCase();\n      let isInteger = integerCheck.includes(trigger);\n      let isOperation = operatorCheck.includes(trigger);\n      let isPeriod = periodCheck.includes(trigger);\n      let isControl = controlCheck.includes(trigger);\n\n      if (calcInput.length > 5) {\n        fixLength(trigger);\n      }\n      if (isInteger) {\n        addInteger(trigger);\n      }\n      if (isOperation) {\n        ifOperation(trigger);\n      }\n      if (isPeriod) {\n        ifPeriod(trigger);\n      }\n      if (isControl) {\n        ifControl(trigger);\n      }\n    });\n    document.addEventListener(\"click\", (event) => {\n      let trigger = String(event.target.id).toLowerCase();\n      let isInteger = integerCheck.includes(trigger);\n      let isOperation = operatorCheck.includes(trigger);\n      let isPeriod = periodCheck.includes(trigger);\n      let isControl = controlCheck.includes(trigger);\n      if (trigger === \"posneg\") {\n        posOrNeg();\n      }\n      if (calcInput.length > 15) {\n        fixLength(trigger);\n      }\n\n      if (isInteger) {\n        addInteger(trigger);\n      }\n      if (isOperation) {\n        ifOperation(trigger);\n      }\n      if (isPeriod) {\n        ifPeriod(trigger);\n      }\n      if (isControl) {\n        ifControl(trigger);\n      }\n    });\n  };\n  return {\n    registerInput,\n  };\n};\n\nexport default Calc;\n","/** @format */\n\nimport Calc from \"./calculator\";\n\n(function () {\n  Calc().registerInput();\n})();\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}